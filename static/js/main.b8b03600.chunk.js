(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{114:function(e,t,n){e.exports={staticText:"home_staticText__2E7jj"}},115:function(e,t,n){e.exports={main:"burger-ingredients_main__3x3CC"}},116:function(e,t,n){e.exports={main:"burger-ingredients-tabs_main__4ggmU",tab:"burger-ingredients-tabs_tab__3o2gE"}},117:function(e,t,n){e.exports={main:"burger-ingredients-box_main__1PVLX"}},118:function(e,t,n){e.exports={main:"counter_main__3VVDh"}},120:function(e,t,n){e.exports={main:"burger-constructor_main__1WTvZ"}},121:function(e,t,n){e.exports={main:"modal-overlay_main__35GhD"}},122:function(e,t,n){e.exports={main:"login_main__1E5z1 index_content-grid__BhKkB"}},124:function(e,t,n){e.exports={main:"register_main__2oJje index_content-grid__BhKkB"}},125:function(e,t,n){e.exports={main:"profile_main__312h1 index_content-grid__BhKkB"}},126:function(e,t,n){e.exports={main:"profile-menu-button_main__2erXe"}},127:function(e,t,n){e.exports={main:"profile-menu_main__2U2Tc"}},128:function(e,t,n){e.exports={main:"profile-home_main__2be0T index_form-area__1zazM"}},129:function(e,t,n){e.exports={main:"profile-orders_main__1vPQx index_orders-area__ftpLd"}},130:function(e,t,n){e.exports={main:"not-found-404_main__30wrt index_content-grid__BhKkB"}},131:function(e,t,n){e.exports={staticText:"feed_staticText__eq-ie"}},144:function(e,t,n){},20:function(e,t,n){e.exports={main:"feed-summary_main__3o5Jf",row:"feed-summary_row__1Sw1n",firstRow:"feed-summary_firstRow__1DnJ8 feed-summary_row__1Sw1n",leftColumn:"feed-summary_leftColumn__1V__I",rightColumn:"feed-summary_rightColumn__1vfCm",header:"feed-summary_header__1m2ey",firstHeader:"feed-summary_firstHeader__2EBFB feed-summary_header__1m2ey",nums:"feed-summary_nums__3lrdp",leftNums:"feed-summary_leftNums__1pOYT feed-summary_nums__3lrdp"}},231:function(e,t,n){"use strict";n.r(t),n.d(t,"useDispatch",(function(){return rr})),n.d(t,"useSelector",(function(){return ar}));var r=n(1),a=n.n(r),c=n(29),s=n.n(c),i=n(30),o=n(62),u=(n(144),n(12)),l=n(2),d=n(51),j=n(5),m=n(9),b=n(15),p="wss://norma.nomoreparties.space/orders",f=p+"/all",O="/auth/user",_="RESET_PASSWORD_STEP_RECOVER",x="RESET_PASSWORD_STEP_RESET",h="RESET_PASSWORD_STEP_LOGIN",v=function(e){return String(e).padStart(6,"0")},g=function(e,t){var n={};return e&&(n[e]=2),t.forEach((function(e){var t=e.id;void 0===n[t]?n[t]=1:n[t]++})),n},y={method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"OPTIONS, GET, POST, PUT, PATCH, DELETE"}},N=Object(l.a)(Object(l.a)({},y),{},{method:"POST"}),w=Object(l.a)(Object(l.a)({},y),{},{method:"PATCH"}),S=function(e){var t=localStorage.getItem("token"),n=Object(l.a)(Object(l.a)({},e),{},{mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"no-referrer"});return t&&(n=Object(l.a)(Object(l.a)({},n),{},{headers:Object(l.a)(Object(l.a)({},n.headers),{},{Authorization:t})})),n},E=function(){return S(N)},C=function(){return S(y)},k=function(){return S(w)},I=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t,n){var r,a,c;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://norma.nomoreparties.space/api"+t,e.prev=1,e.next=4,fetch(r,n);case 4:if(!(a=e.sent).ok){e.next=12;break}return e.next=8,a.json();case 8:return c=e.sent,e.abrupt("return",Promise.resolve([c,a.headers]));case 12:throw new Error("\u0441\u0442\u0430\u0442\u0443\u0441 ".concat(a.status));case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",Promise.reject([!1,{error:e.t0}]));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(e){if(!e)throw Error("\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0435\u0440\u043d\u0443\u043b \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442")},R=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t="function"===typeof e?e():e,n?Object(l.a)(Object(l.a)({},t),{},{body:JSON.stringify(n)}):Object(l.a)({},t)},P=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t,n){var r,a,c,s,i,o=arguments;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:void 0,e.prev=1,e.next=4,I(t,n);case 4:return a=e.sent,c=Object(j.a)(a,2),s=c[0],i=c[1],T(s.success),console.log("\u0417\u0430\u043f\u0440\u043e\u0441 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d:",t,n,i,s),"function"===typeof r&&r(i),e.abrupt("return",Promise.resolve(s));case 14:return e.prev=14,e.t0=e.catch(1),console.log("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d \u0441 \u043e\u0448\u0438\u0431\u043a\u043e\u0439",t,n,e.t0),e.abrupt("return",Promise.reject(e.t0));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t,n){var r,a,c,s=arguments;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:void 0,e.prev=1,e.next=4,P(t,n,r);case 4:return a=e.sent,e.abrupt("return",Promise.resolve(a));case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,F();case 12:if(!e.sent){e.next=18;break}return e.next=16,P(t,n,r);case 16:return c=e.sent,e.abrupt("return",Promise.resolve(c));case 18:return e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),W=function(e){switch(e){case"bun":return"\u0411\u0443\u043b\u043a\u0438";case"main":return"\u041d\u0430\u0447\u0438\u043d\u043a\u0438";case"sauce":return"\u0421\u043e\u0443\u0441\u044b"}},B=function(){var e=Object(b.a)(Object(m.a)().mark((function e(){var t,n,r;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/ingredients",y);case 2:return t=e.sent,n=t.data,r=[],n.map((function(e){return e.type})).forEach((function(e){r.find((function(t){return t.type===e}))||r.splice(0,0,{type:e,name:W(e)})})),e.abrupt("return",Promise.resolve([n,r.sort((function(e,t){return e.type.localeCompare(t.type)}))]));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t){var n,r,a,c;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("refreshToken")){e.next=3;break}return e.abrupt("return",Promise.reject());case 3:return e.next=5,D("/orders",R(E,{token:n,ingredients:t}));case 5:return r=e.sent,a=r.name,c=r.order.number,e.abrupt("return",Promise.resolve({name:a,number:v(c)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t){var n,r;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/password-reset",R(N,{email:t}));case 2:return n=e.sent,r=n.message,e.abrupt("return",Promise.resolve({message:r}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t){var n,r;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/password-reset/reset",R(N,t));case 2:return n=e.sent,r=n.message,e.abrupt("return",Promise.resolve({message:r}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t){var n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/auth/register",R(N,t));case 2:return n=e.sent,e.abrupt("return",Promise.resolve(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t){var n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/auth/login",R(N,t));case 2:return n=e.sent,e.abrupt("return",Promise.resolve(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t){var n,r;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/auth/logout",R(E,{token:t}));case 2:return n=e.sent,r=n.message,e.abrupt("return",Promise.resolve({message:r}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(Object(m.a)().mark((function e(){var t,n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("refreshToken")){e.next=3;break}return e.abrupt("return",Promise.resolve(!1));case 3:return e.next=5,P("/auth/token",R(E,{token:t}));case 5:return n=e.sent,localStorage.setItem("token",n.accessToken),localStorage.setItem("refreshToken",n.refreshToken),e.abrupt("return",Promise.resolve(!0));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(b.a)(Object(m.a)().mark((function e(){var t;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(O,R(C));case 3:return t=e.sent,e.abrupt("return",Promise.resolve(t));case 7:return e.prev=7,e.t0=e.catch(0),console.log("\u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442",e.t0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t){var n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(O,R(k,t));case 2:return n=e.sent,e.abrupt("return",Promise.resolve(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V="LOGIN_REQUEST",z="LOGIN_SUCCESS",J="LOGIN_FAILED",K="LOGOUT_REQUEST",X="LOGOUT_SUCCESS",Y="LOGOUT_FAILED",Z=n(0),$=["children"],ee=function(e){var t=e.children,n=Object(d.a)(e,$),a=ar((function(e){return e.authInfo})),c=a.request,s=a.success,i=Object(u.h)(),o=rr();return Object(r.useEffect)((function(){s||F().then((function(){H().then((function(e){o({type:z,authInfo:e})})).catch((function(){o({type:J})}))})).catch((function(){o({type:J})}))}),[]),c?null:s?Object(Z.jsx)(u.b,Object(l.a)(Object(l.a)({},n),{},{render:function(){return t}})):Object(Z.jsx)(u.a,{to:{pathname:"/login",state:{from:i}}})},te=["children"],ne=function(e){var t,n=e.children,r=Object(d.a)(e,te),a=ar((function(e){return e.authInfo})),c=a.request,s=a.success,i=Object(u.h)();return c?null:s?Object(Z.jsx)(u.a,{to:(null===i||void 0===i||null===(t=i.state)||void 0===t?void 0:t.from)||"/"}):Object(Z.jsx)(u.b,Object(l.a)(Object(l.a)({},r),{},{render:function(){return n}}))},re=n(44),ae=n.n(re),ce=n(45),se=n.n(ce),ie=n(4),oe=n(8),ue=function(e){switch(e){case"burger":return Object(Z.jsx)(ie.BurgerIcon,{type:"primary"});case"list":return Object(Z.jsx)(ie.ListIcon,{type:"primary"});case"profile":return Object(Z.jsx)(ie.ProfileIcon,{type:"primary"});default:return null}},le=function(e){var t=e.icon,n=e.text,a=e.path,c=Object(u.h)().pathname,s=Object(r.useMemo)((function(){return c.toLowerCase()===(null===a||void 0===a?void 0:a.toLowerCase())}),[c,a]);return Object(Z.jsxs)(oe.b,{className:se.a.main,to:{pathname:null!==a&&void 0!==a?a:"",state:{from:c}},children:[Object(Z.jsx)("p",{className:se.a.iconWrapper,children:ue(t)}),Object(Z.jsx)("p",{className:"text text_type_main-default ".concat(se.a.textWrapper," ").concat(s?se.a.active:""),children:n})]})},de=function(){var e=Object(u.h)().pathname;return Object(Z.jsxs)("header",{className:ae.a.nav,children:[Object(Z.jsxs)("div",{className:ae.a.leftItems,children:[Object(Z.jsx)(le,{path:"/",icon:"burger",text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"}),Object(Z.jsx)(le,{path:"/feed",icon:"list",text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(Z.jsx)(oe.b,{className:ae.a.homeLink,to:{pathname:"/",state:{from:e}},children:Object(Z.jsx)(ie.Logo,{})}),Object(Z.jsx)("div",{className:ae.a.rightItems,children:Object(Z.jsx)(le,{path:"/profile",icon:"profile",text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})})]})},je=n(114),me=n.n(je),be=n(115),pe=n.n(be),fe=n(116),Oe=n.n(fe),_e="GET_INGREDIENTS_REQUEST",xe="GET_INGREDIENTS_SUCCESS",he="GET_INGREDIENTS_FAILED",ve="SET_ACTIVE_TAB",ge={bun:Object(r.createRef)(),main:Object(r.createRef)(),sauce:Object(r.createRef)()},ye=a.a.createContext(ge),Ne=function(){var e=ar((function(e){return e.ingredients})),t=e.activeTab,n=e.cats,a=Object(r.useContext)(ye),c=rr(),s=Object(r.useCallback)((function(e){var t,r=n.find((function(t){return t.type===e}));r&&(null===(t=a[r.type].current)||void 0===t||t.scrollIntoView({behavior:"smooth"}),c({type:ve,active:r.type}))}),[c,n,a]);return Object(Z.jsx)("div",{className:Oe.a.main,children:n.map((function(e){return Object(Z.jsx)(ie.Tab,{value:e.type,active:e.type===t,onClick:s,children:e.name},e.type)}))})},we=n(117),Se=n.n(we),Ee=n(84),Ce=n.n(Ee),ke=n(239),Ie=n(46),Te=n.n(Ie),Re=n(118),Pe=n.n(Re),De=function(e){var t=e.count;return!t||t<1?null:Object(Z.jsx)("div",{className:Pe.a.main,children:Object(Z.jsx)("p",{className:"text text_type_main-small",children:t})})},We=function(e){var t=e.ingredient,n=e.count,r=Object(u.h)(),a=Object(ke.a)({type:"new_ingredient",item:Object(l.a)({},t),collect:function(e){return{showCount:!e.isDragging(),opacity:e.isDragging()?.5:1}}}),c=Object(j.a)(a,2),s=c[0],i=s.showCount,o=s.opacity,d=c[1];return Object(Z.jsxs)(oe.b,{className:Te.a.main,style:{opacity:o},to:{pathname:"/ingredients/".concat(t._id),state:{background:r}},children:[i&&Object(Z.jsx)(De,{count:n}),Object(Z.jsxs)("div",{ref:d,children:[Object(Z.jsx)("img",{src:t.image,alt:t.name}),Object(Z.jsxs)("div",{className:Te.a.priceWrapper,children:[Object(Z.jsx)("p",{className:"text_type_digits-default ".concat(Te.a.textWrapper),children:t.price}),Object(Z.jsx)("div",{className:Te.a.logoWrapper,children:Object(Z.jsx)(ie.CurrencyIcon,{type:"primary"})})]}),Object(Z.jsx)("p",{className:"text text_type_main-small",children:t.name})]})]})},Be=function(e){var t,n=e.type,a=ar((function(e){return e.ingredients})),c=a.items,s=a.cats,i=null!==(t=ar((function(e){return e.constructor.counter})))&&void 0!==t?t:{},o=Object(r.useContext)(ye),u=Object(r.useMemo)((function(){return s.find((function(e){return e.type===n}))}),[s,n]);return u?Object(Z.jsxs)("div",{"data-testid":"".concat(n,"_cat"),className:Ce.a.main,children:[Object(Z.jsx)("p",{className:"text text_type_main-medium ".concat(Ce.a.textWrapper),ref:o[u.type],children:u.name}),c.filter((function(e){return e.type===n})).map((function(e){return Object(Z.jsx)(We,{ingredient:e,count:i[e._id]},e._id)}))]}):null},Le=function(){var e=ar((function(e){return e.ingredients.cats})),t=Object(r.useContext)(ye),n=rr(),a=Object(r.createRef)(),c=Object(r.useCallback)((function(r){r.persist(),r.preventDefault();var c=function(e){return e.current?Math.abs(Math.floor(e.current.getBoundingClientRect().top)):0},s=a.current?a.current.getBoundingClientRect().top+2:0,i={type:e[0].type,pos:c(t[e[0].type])};e.forEach((function(e){if(i.type!==e.type){var n=Math.abs(s-c(t[e.type]));i.pos>n&&(i.type=e.type,i.pos=n)}})),n({type:ve,active:i.type})}),[e,a,n,t]);return Object(Z.jsx)("div",{className:"".concat(Se.a.main," scrollable"),onScroll:c,ref:a,children:e.map((function(e){return Object(Z.jsx)(Be,{type:e.type},e.type)}))})},qe=function(){return Object(Z.jsx)("div",{className:pe.a.main,children:Object(Z.jsxs)(ye.Provider,{value:ge,children:[Object(Z.jsx)(Ne,{}),Object(Z.jsx)(Le,{})]})})},Ge=n(120),Ae=n.n(Ge),Ue=n(26),Me=n(240),Fe=n(38),He=n.n(Fe),Qe="CHANGE_INGREDIENTS",Ve="SET_PRICE",ze="UPDATE_INGREDIENTS_ORDER",Je="CLEAR_CONSTRUCTOR",Ke=n(56),Xe=n.n(Ke),Ye=function(e){var t=e.data,n=e.index,a=e.onRemoveIngredient,c=ar((function(e){return e.constructor.items})),s=rr(),i=Object(r.useRef)(null),o=Object(r.useCallback)((function(e,t){var n=c[e],r=Object(Ue.a)(c);r.splice(e,1),r.splice(t,0,n),s({type:ze,items:Object(Ue.a)(r)})}),[c,s]),u=Object(Me.a)({accept:"constructor_item",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(i.current){var a=e.index,c=n;if(a!==c){var s=null===(r=i.current)||void 0===r?void 0:r.getBoundingClientRect(),u=(s.bottom-s.top)/2,l=t.getClientOffset(),d=l?l.y-s.top:0;a<c&&d<u||a>c&&d>u||(o(a,c),e.index=c)}}}}),l=Object(j.a)(u,2)[1],d=Object(ke.a)({type:"constructor_item",item:{index:n},collect:function(e){return{opacity:e.isDragging()?0:1}}}),m=Object(j.a)(d,2),b=m[0].opacity;(0,m[1])(l(i));return Object(Z.jsx)("div",{className:Xe.a.main,style:{opacity:b},ref:i,onDrop:function(e){e.persist(),e.preventDefault()},children:Object(Z.jsxs)("div",{className:Xe.a.ingredientWrapper,children:[Object(Z.jsx)("div",{className:Xe.a.dragIconWrapper,children:Object(Z.jsx)(ie.DragIcon,{type:"primary"})}),Object(Z.jsx)(ie.ConstructorElement,{text:t.name,thumbnail:t.image,price:t.price,handleClose:function(){return a(n)}})]})})},Ze=n(241),$e=function(){var e=ar((function(e){return e.ingredients.items})),t=ar((function(e){return e.constructor})),n=t.bun,a=t.items,c=rr(),s=Object(Me.a)({accept:"new_ingredient",collect:function(e){return{isHover:e.isOver()}},drop:function(e){d(e)}}),i=Object(j.a)(s,2),o=i[0].isHover,u=i[1];Object(r.useEffect)((function(){var t=a?Object(Ue.a)(a):[];if(n){var r={id:n,key:""};t.splice(0,0,r,r)}var s=t.map((function(t){var n;return t?null===(n=e.find((function(e){return e._id===t.id})))||void 0===n?void 0:n.price:0})).reduce((function(e,t){return(null!==e&&void 0!==e?e:0)+(null!==t&&void 0!==t?t:0)}),0);c({type:Ve,price:s})}),[n,a,e,c]);var d=Object(r.useCallback)((function(e){var t=a?Object(Ue.a)(a):[],r=n;"bun"===e.type?r=e._id:t.splice(-1,0,{id:e._id,key:Object(Ze.a)()}),c({type:Qe,bun:r,items:t})}),[c,a,n]),m=Object(r.useCallback)((function(e){var t=Object(Ue.a)(a);t.splice(e,1),c({type:Qe,bun:n,items:t})}),[a,n,c]),b=Object(r.useMemo)((function(){return e.find((function(e){return e._id===n}))}),[e,n]),p=Object(r.useMemo)((function(){return b}),[b]),f=Object(r.useMemo)((function(){return null===a||void 0===a?void 0:a.map((function(t){var n=e.find((function(e){return e._id===t.id}));if(n)return Object(l.a)(Object(l.a)({},n),{},{key:t.key})})).filter((function(e){return void 0!==e}))}),[a,e]);return Object(Z.jsxs)("div",{"data-testid":"drop-target",className:"".concat(He.a.main," ").concat(o?He.a.onHover:""),ref:u,children:[b&&Object(Z.jsx)("div",{className:He.a.topBun,children:Object(Z.jsx)(ie.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(b.name," (\u0432\u0435\u0440\u0445)"),thumbnail:b.image,price:b.price})}),a&&Object(Z.jsx)("div",{className:"".concat(He.a.ingredients," scrollable"),style:{margin:n?"0":"auto 0"},children:null===f||void 0===f?void 0:f.map((function(e,t){return e&&Object(Z.jsx)(Ye,{data:e,index:t,onRemoveIngredient:m},e.key)}))}),p&&Object(Z.jsx)("div",{className:He.a.bottomBun,children:Object(Z.jsx)(ie.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(p.name," (\u043d\u0438\u0437)"),thumbnail:p.image,price:p.price})})]})},et=n(57),tt=n.n(et),nt=n(47),rt=n.n(nt),at=n(121),ct=n.n(at),st=function(e){var t=e.isShowing,n=e.toggle;return Object(Z.jsx)("div",{className:ct.a.main,onClick:function(){t&&n()}})},it=function(e){var t=e.isShowing,n=Object(r.useCallback)((function(){t&&e.toggle()}),[t,e]);Object(r.useEffect)((function(){function e(e){"Escape"===e.key&&n()}if(t)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[t,n]);var c;return e.isShowing?s.a.createPortal(Object(Z.jsxs)(a.a.Fragment,{children:[Object(Z.jsx)("div",{className:rt.a.main,children:Object(Z.jsxs)("div",{className:"modal-grid",children:[Object(Z.jsx)("div",{className:rt.a.modalHeader,children:(c=e.headerText,Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("p",{className:"text text_type_main-large",children:c}),Object(Z.jsx)("button",{"data-testid":"close-modal-btn",className:rt.a.closeButton,onClick:n,children:Object(Z.jsx)(ie.CloseIcon,{type:"primary"})})]}))}),Object(Z.jsx)("div",{className:rt.a.modalContent,children:e.children})]})}),Object(Z.jsx)(st,{isShowing:e.isShowing,toggle:e.toggle})]}),document.getElementById("react-modals")):null},ot=n(58),ut=n.n(ot),lt=n.p+"static/media/done.b2157769.png",dt="GET_ORDER_REQUEST",jt="GET_ORDER_SUCCESS",mt="GET_ORDER_FAILED",bt="CLOSE_ORDER",pt=function(){var e=ar((function(e){return e.orderDetails.number})),t=rr(),n=Object(r.useCallback)((function(){t({type:bt})}),[t]);return Object(Z.jsxs)("div",{className:ut.a.main,children:[Object(Z.jsx)("p",{className:"text text_type_digits-large",children:e}),Object(Z.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Z.jsx)("button",{className:ut.a.confirmButton,style:{backgroundImage:"url(".concat(lt,")")},onClick:n}),Object(Z.jsx)("p",{className:"text text_type_main-small",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(Z.jsx)("p",{className:"text text_type_main-small ".concat(ut.a.comment),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},ft=function(){var e=ar((function(e){return e.authInfo.success})),t=Object(u.h)(),n=ar((function(e){return e.constructor})),r=n.items,a=n.bun,c=Object(u.g)(),s=ar((function(e){return e.constructor.price})),i=ar((function(e){return e.orderDetails.show})),o=rr();return Object(Z.jsxs)("div",{className:tt.a.main,children:[Object(Z.jsx)("p",{className:"text text_type_digits-medium",children:s}),Object(Z.jsx)("div",{className:tt.a.iconWrapper,children:Object(Z.jsx)(ie.CurrencyIcon,{type:"primary"})}),Object(Z.jsx)("div",{className:tt.a.buttonWrapper,children:Object(Z.jsx)(ie.Button,{type:"primary",size:"large",onClick:function(n){var s;if(n.persist(),n.stopPropagation(),e){var i=null!==(s=null===r||void 0===r?void 0:r.map((function(e){return e.id})))&&void 0!==s?s:[];(null===a||void 0===a?void 0:a.length)>0&&i.splice(-1,0,a,a),o(function(e){return function(t){t({type:dt}),L(e).then((function(e){var n=e.name,r=e.number;t({type:jt,name:n,number:r}),t({type:Je})})).catch((function(){t({type:mt})}))}}(i))}else c.replace({pathname:"/login",state:{from:t}})},disabled:!s||!a,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})}),Object(Z.jsx)(it,{isShowing:i,toggle:function(){o({type:bt})},headerText:" ",children:Object(Z.jsx)(pt,{})})]})},Ot=function(){return Object(Z.jsxs)("div",{className:Ae.a.main,children:[Object(Z.jsx)($e,{}),Object(Z.jsx)(ft,{})]})},_t=n(238),xt=n(133),ht=function(){return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("h1",{className:"text_type_main-large ".concat(me.a.staticText),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(Z.jsxs)(_t.a,{backend:xt.a,children:[Object(Z.jsx)(qe,{}),Object(Z.jsx)(Ot,{})]})]})},vt=n(122),gt=n.n(vt),yt=n(123),Nt=n(59),wt=n.n(Nt),St=function(e){var t=e.children,n=e.headerText,r=e.submitText,a=e.onSubmit;return Object(Z.jsxs)("form",{className:wt.a.main,onSubmit:function(e){e.persist(),e.preventDefault();var t,n=e.target,r={},c=Object(yt.a)(n);try{for(c.s();!(t=c.n()).done;){var s=t.value;"input"===(null===s||void 0===s?void 0:s.localName)&&(r[s.name]=s.value)}}catch(i){c.e(i)}finally{c.f()}a(r)},children:[Object(Z.jsx)("h1",{className:"text text_type_main-medium ".concat(wt.a.header),children:n}),t,Object(Z.jsx)("div",{className:wt.a.buttonWrapper,children:Object(Z.jsx)(ie.Button,{type:"primary",size:"large",children:r})})]})},Et=n(28),Ct=function(e){var t=Object(r.useState)(e),n=Object(j.a)(t,2),a=n[0],c=n[1];return{form:a,handleChange:function(e){e.persist(),e.preventDefault();var t=e.target,n=t.value,r=t.name;c(Object(l.a)(Object(l.a)({},a),{},Object(Et.a)({},r,n)))},setValues:c}},kt=function(){var e,t=ar((function(e){return e.authInfo.user.email})),n=ar((function(e){return e.authInfo.success})),r=rr(),a=Ct({email:t,password:""}),c=a.form,s=a.handleChange,i=Object(u.h)();return n?Object(Z.jsx)(u.a,{to:(null===i||void 0===i||null===(e=i.state)||void 0===e?void 0:e.from)||"/"}):Object(Z.jsx)("div",{className:gt.a.main,children:Object(Z.jsxs)("div",{className:"form-area",children:[Object(Z.jsxs)(St,{headerText:"\u0412\u0445\u043e\u0434",submitText:"\u0412\u043e\u0439\u0442\u0438",onSubmit:function(e){var t=e.email,n=e.password;r(function(e){return function(t){t({type:V}),U(e).then((function(e){localStorage.setItem("token",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),t({type:z,authInfo:e})})).catch((function(){t({type:J})}))}}({email:t,password:n}))},children:[Object(Z.jsx)(ie.EmailInput,{name:"email",value:c.email,onChange:s}),Object(Z.jsx)(ie.PasswordInput,{value:c.password,name:"password",onChange:s})]}),Object(Z.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(Z.jsx)(oe.b,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(Z.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:[" \u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(Z.jsx)(oe.b,{to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})},It=n(124),Tt=n.n(It),Rt=function(){var e=rr(),t=Ct({email:"",password:"",name:""}),n=t.form,r=t.handleChange;return Object(Z.jsx)("div",{className:Tt.a.main,children:Object(Z.jsxs)("div",{className:"form-area",children:[Object(Z.jsxs)(St,{headerText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",submitText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onSubmit:function(t){var n=t.name,r=t.email,a=t.password;e(function(e){return function(t){t({type:V}),A(e).then((function(e){localStorage.setItem("token",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),t({type:z,authInfo:e})})).catch((function(){t({type:J})}))}}({name:n,email:r,password:a}))},children:[Object(Z.jsx)(ie.Input,{type:"text",name:"name",placeholder:"\u0418\u043c\u044f",value:n.name,onChange:r}),Object(Z.jsx)(ie.EmailInput,{name:"email",value:n.email,onChange:r}),Object(Z.jsx)(ie.PasswordInput,{onChange:r,value:n.password,name:"password"})]}),Object(Z.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(Z.jsx)(oe.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Pt=n(54),Dt=n.n(Pt),Wt="RESET_PASSWORD_REQUEST",Bt="RESET_PASSWORD_SUCCESS",Lt="RESET_PASSWORD_FAILED",qt=function(){var e=ar((function(e){return e.resetPassword})),t=e.step,n=e.message,a=Object(r.useState)(""),c=Object(j.a)(a,2),s=c[0],i=c[1],o=rr(),l=Object(u.g)(),d=Object(u.h)();Object(r.useEffect)((function(){t===x&&l.replace({pathname:"/reset-password",state:{from:d}})}),[t,l,o,d]);var m=Object(r.useCallback)((function(e){e.persist(),e.preventDefault(),i(e.target.value)}),[i]);return Object(Z.jsx)("div",{className:Dt.a.main,children:Object(Z.jsxs)("div",{className:"form-area",children:[Object(Z.jsx)(St,{headerText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",submitText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",onSubmit:function(e){var t=e.email;o(function(e,t,n){return function(r){r({type:Wt}),q(e).then((function(e){var n=e.message;r({type:Bt,message:n,stepOnSuccess:t})})).catch((function(e){r({type:Lt,error:e,stepOnFailed:n})}))}}(t,x,_))},children:Object(Z.jsx)(ie.EmailInput,{name:"email",value:s,onChange:m})}),Object(Z.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:n}),Object(Z.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(Z.jsx)(oe.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Gt=function(){var e=ar((function(e){return e.resetPassword})),t=e.step,n=e.message,a=rr(),c=Object(u.g)(),s=Object(u.h)(),i=Ct({password:"",token:""}),o=i.form,l=i.handleChange;Object(r.useEffect)((function(){var e,n,r=null===(e=s.state)||void 0===e||null===(n=e.from)||void 0===n?void 0:n.pathname;"/forgot-password"===r||"/reset-password"===r?t!==_&&t!==h||c.replace({pathname:"/login",state:{from:s}}):c.replace({pathname:"/not-found",state:{from:s}})}),[c,t,s]);return Object(Z.jsx)("div",{className:Dt.a.main,children:Object(Z.jsxs)("div",{className:"form-area",children:[Object(Z.jsxs)(St,{headerText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",submitText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){var t=e.password,n=e.token;a(function(e,t,n){return function(r){r({type:Wt}),G(e).then((function(e){var n=e.message;r({type:Bt,message:n,stepOnSuccess:t})})).catch((function(e){r({type:Lt,error:e,stepOnFailed:n})}))}}({password:t,token:n},h,_))},children:[Object(Z.jsx)(ie.PasswordInput,{name:"password",value:o.password,onChange:l}),Object(Z.jsx)(ie.Input,{type:"text",name:"token",value:o.token,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:l})]}),Object(Z.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:n}),Object(Z.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(Z.jsx)(oe.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},At=n(125),Ut=n.n(At),Mt=n(126),Ft=n.n(Mt),Ht=function(e){var t=e.path,n=e.text,a=e.onClick,c=Object(u.h)().pathname,s=Object(u.g)(),i=Object(r.useMemo)((function(){return c.toLowerCase()===(null===t||void 0===t?void 0:t.toLowerCase())}),[c,t]),o=Object(r.useCallback)((function(){if(!i){if("function"===typeof a)return a();s.push({pathname:t,state:{from:c}})}}),[i,s,t,a,c]);return Object(Z.jsx)("button",{className:Ft.a.main,onClick:o,children:Object(Z.jsx)("p",{className:"text text_type_main-medium".concat(i?"":" text_color_inactive"),children:n})})},Qt=n(127),Vt=n.n(Qt),zt=function(e){var t=e.onLogout;return Object(Z.jsxs)("div",{className:Vt.a.main,children:[Object(Z.jsx)(Ht,{path:"/profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(Z.jsx)(Ht,{path:"/profile/orders",text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Z.jsx)(Ht,{text:"\u0412\u044b\u0445\u043e\u0434",onClick:t}),Object(Z.jsx)("p",{className:"text text_type_main-small text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})},Jt=n(128),Kt=n.n(Jt),Xt=function(){var e=ar((function(e){return e.authInfo})),t=e.request,n=e.user,a=n.name,c=n.email,s=Object(r.useMemo)((function(){return{name:null!==a&&void 0!==a?a:"",email:null!==c&&void 0!==c?c:"",password:""}}),[a,c]),i=Ct(s),o=i.form,u=i.handleChange,d=i.setValues,m=Object(r.useState)(!0),b=Object(j.a)(m,2),p=b[0],f=b[1],O=rr();Object(r.useEffect)((function(){s.password||(s.password=o.password),f(!t&&o.name===s.name&&o.email===s.email&&o.password===s.password)}),[o,s,t]);var _=Object(r.useCallback)((function(e){e.persist(),e.preventDefault(),O(function(e){return function(t){Q(e).then((function(e){return t({type:z,authInfo:e})})).catch((function(e){return Promise.reject(e)}))}}(o))}),[o,O]),x=Object(r.useCallback)((function(e){e.persist(),e.preventDefault(),d(Object(l.a)({},s))}),[s,d]);return Object(Z.jsxs)("form",{className:Kt.a.main,onSubmit:_,children:[Object(Z.jsx)(ie.Input,{type:"text",name:"name",value:o.name,placeholder:"\u0418\u043c\u044f",onChange:u}),Object(Z.jsx)(ie.EmailInput,{name:"email",value:o.email,onChange:u}),Object(Z.jsx)(ie.PasswordInput,{name:"password",value:o.password,onChange:u}),!p&&Object(Z.jsxs)("div",{children:[" ",Object(Z.jsx)(ie.Button,{type:"primary",size:"medium",disabled:p,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(Z.jsx)(ie.Button,{type:"secondary",size:"medium",disabled:p,onClick:x,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})},Yt="WS_CONNECTION_START",Zt="WS_CONNECTION_SUCCESS",$t="WS_CONNECTION_ERROR",en="WS_CONNECTION_CLOSED",tn="WS_GET_MESSAGE",nn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r=e;if(t){var a,c=null===(a=localStorage.getItem("token"))||void 0===a?void 0:a.split(" ")[1];r+="?token=".concat(c)}n({type:Yt,payload:r})}},rn={wsStart:Yt,wsSend:"WS_SEND_MESSAGE",onOpen:function(e){return{type:Zt,payload:e}},onError:function(e){return{type:$t,payload:e}},onMessage:function(e){var t=e.data;return{type:tn,payload:t}},onClose:function(e){return{type:en,payload:e}}},an=n(34),cn=n.n(an),sn=n(87),on=n.n(sn),un=function(e){var t=e.image,n=e.info;return Object(Z.jsx)("div",{className:on.a.ingredientBg,children:Object(Z.jsx)("div",{className:on.a.ingredient,style:{backgroundImage:"url(".concat(t,")")},children:Object(Z.jsx)("p",{className:"text text_type_main-default",children:n})})})},ln=function(e){var t,n=e.order,a=null===(t=ar((function(e){return e.ingredients.items})))||void 0===t?void 0:t.filter((function(e){return n.ingredients.includes(e._id)})),c=Object(r.useMemo)((function(){var e=a.length;return e>7?{items:a.slice(0,7),extra:"+"+(e-7).toString()}:{items:a,extra:""}}),[a]),s=c.items,i=c.extra,o=Object(r.useMemo)((function(){return new Date(n.createdAt)}),[n.createdAt]),u=Object(r.useMemo)((function(){return a?a.map((function(e){return Number(e.price)})).reduce((function(e,t){return e+t})):0}),[a]);return Object(Z.jsxs)("div",{className:cn.a.main,children:[Object(Z.jsxs)("div",{className:cn.a.content,children:[Object(Z.jsxs)("p",{className:"text text_type_digits-default",children:["#",n.number]}),Object(Z.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:o.toLocaleString()})]}),Object(Z.jsx)("p",{className:"text text_type_main-default",children:n.name}),Object(Z.jsxs)("div",{className:cn.a.content,children:[Object(Z.jsx)("div",{className:cn.a.ingredients,children:s.map((function(e,t){return Object(Z.jsx)("div",{className:cn.a.icon,style:{zIndex:"".concat(1e3-t)},children:Object(Z.jsx)(un,{image:e.image,info:t===s.length-1?i:""})},"".concat(t,"_").concat(e._id))}))}),Object(Z.jsxs)("p",{className:"text text_type_main-medium ".concat(cn.a.price),children:[u,"\xa0",Object(Z.jsx)(ie.CurrencyIcon,{type:"primary"})]})]})]})},dn=n(88),jn=n.n(dn),mn=function(){var e=ar((function(e){return e.feed})),t=Object(u.h)();return e.data.success?Object(Z.jsx)("div",{className:"".concat(jn.a.main," scrollable"),children:e.data.orders.map((function(e){return Object(Z.jsx)(oe.b,{className:jn.a.link,to:{pathname:"".concat(t.pathname,"/").concat(e._id),state:{background:t}},children:Object(Z.jsx)(ln,{order:e})},e._id)}))}):null},bn=n(129),pn=n.n(bn),fn=function(){var e=rr();return Object(r.useEffect)((function(){return e(nn(p,!0)),function(){e({type:en})}}),[]),Object(Z.jsx)("div",{className:pn.a.main,children:Object(Z.jsx)(mn,{})})},On=function(e){var t=e.children,n=e.path,a=Object(u.h)().pathname;return Object(r.useMemo)((function(){return a.toLocaleLowerCase()===n.toLocaleLowerCase()}),[a,n])?Object(Z.jsx)(Z.Fragment,{children:t}):null},_n=function(){var e=rr(),t=Object(r.useCallback)((function(){e((function(e){e({type:K});var t=localStorage.getItem("refreshToken");if(null===t)return e({type:Y});M(t).then((function(t){var n=t.message;localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),e({type:X,message:n})})).catch((function(){e({type:Y})}))}))}),[e]);return Object(Z.jsxs)("div",{className:Ut.a.main,children:[Object(Z.jsx)(zt,{onLogout:t}),Object(Z.jsx)(On,{path:"/profile",children:Object(Z.jsx)(Xt,{})}),Object(Z.jsx)(On,{path:"/profile/orders",children:Object(Z.jsx)(fn,{})})]})},xn=n(60),hn=n.n(xn),vn=n(61),gn=n.n(vn),yn=[{name:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b",accsessor:"calories"},{name:"\u0411\u0435\u043b\u043a\u0438, \u0433",accsessor:"proteins"},{name:"\u0416\u0438\u0440\u044b, \u0433",accsessor:"fat"},{name:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",accsessor:"carbohydrates"}],Nn=function(){var e=Object(u.i)().id,t=ar((function(e){return e.ingredients.items})),n=Object(r.useMemo)((function(){return t.find((function(t){return t._id===e}))}),[e,t]);return n?Object(Z.jsxs)("div",{className:gn.a.main,children:[Object(Z.jsx)("img",{src:n.image_large,alt:n.name}),Object(Z.jsx)("p",{className:"text text_type_main-medium",children:n.name}),Object(Z.jsx)("div",{className:gn.a.details,children:yn.map((function(e){return Object(Z.jsxs)("div",{className:gn.a.info,children:[Object(Z.jsx)("p",{className:"text text_type_main-small",children:e.name}),Object(Z.jsx)("p",{className:"text text_type_main-medium",children:n[e.accsessor]})]},e.accsessor)}))})]}):null},wn=function(){return Object(Z.jsx)("div",{className:hn.a.main,children:Object(Z.jsxs)("div",{className:"form-area ".concat(hn.a.box),children:[Object(Z.jsx)("h1",{className:"text text_type_main-large ".concat(hn.a.header),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(Z.jsx)(Nn,{})]})})},Sn=n(130),En=n.n(Sn),Cn=function(){return Object(Z.jsx)("div",{className:En.a.main,children:Object(Z.jsx)("div",{className:"form-area",children:Object(Z.jsx)("p",{className:"text text_type_main-large",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})})},kn=n(20),In=n.n(kn),Tn=function(){var e=ar((function(e){return e.feed})),t=Object(r.useMemo)((function(){if(!e.wsConnected||!e.data.success)return[0,0,void 0,void 0];var t=[],n=[];return e.data.orders.forEach((function(e){"done"===e.status?t.push(e.number):n.push(e.number)})),[e.data.totalToday,e.data.total,n,t]}),[e]),n=Object(j.a)(t,4),a=n[0],c=n[1],s=n[2],i=n[3];return Object(Z.jsxs)("div",{className:In.a.main,children:[Object(Z.jsxs)("div",{className:In.a.firstRow,children:[Object(Z.jsxs)("div",{className:In.a.leftColumn,children:[Object(Z.jsx)("p",{className:"text text_type_main-default ".concat(In.a.firstHeader),children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(Z.jsx)("div",{className:In.a.leftNums,children:null===i||void 0===i?void 0:i.map((function(e){return Object(Z.jsx)("p",{className:"text text_type_digits-default",children:e},e)}))})]}),Object(Z.jsxs)("div",{className:In.a.rightColumn,children:[Object(Z.jsx)("p",{className:"text text_type_main-default ".concat(In.a.firstHeader),children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(Z.jsx)("div",{className:In.a.nums,children:null===s||void 0===s?void 0:s.map((function(e){return Object(Z.jsx)("p",{className:"text text_type_digits-default",children:e},e)}))})]})]}),Object(Z.jsxs)("div",{className:In.a.row,children:[Object(Z.jsx)("p",{className:"text text_type_main-default  ".concat(In.a.header),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(Z.jsx)("p",{className:"text text_type_digits-large",children:c})]}),Object(Z.jsxs)("div",{className:In.a.row,children:[Object(Z.jsx)("p",{className:"text text_type_main-default ".concat(In.a.header),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(Z.jsx)("p",{className:"text text_type_digits-large",children:a})]})]})},Rn=n(131),Pn=n.n(Rn),Dn=function(){var e=rr();return Object(r.useEffect)((function(){return e(nn(f)),function(){e({type:en})}}),[]),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("h1",{className:"text_type_main-medium ".concat(Pn.a.staticText),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Z.jsx)(mn,{}),Object(Z.jsx)(Tn,{})]})},Wn=n(89),Bn=n.n(Wn),Ln=n(25),qn=n.n(Ln),Gn=function(){var e=Object(u.i)().id,t=ar((function(e){return e.feed.data.orders})).find((function(t){return t._id===e})),n=ar((function(e){return e.ingredients.items})).filter((function(e){return t&&t.ingredients.find((function(t){return t===e._id}))}))||[];if(!t)return null;var r=function(e){var t=[];return e.forEach((function(e){var n=t.find((function(t){return t.item._id===e._id}));n||(n={item:e,count:0},t.push(n)),n.count++,"bun"===e.type&&n.count++})),t}(n),a=r.map((function(e){return e.item.price*e.count})).reduce((function(e,t){return e+t})),c=new Date(t.createdAt);return Object(Z.jsxs)("div",{className:qn.a.main,children:[Object(Z.jsx)("div",{className:qn.a.firstRow,children:Object(Z.jsxs)("p",{className:"text text_type_digits-default",children:["#",t.number]})}),Object(Z.jsxs)("div",{className:qn.a.nameRow,children:[Object(Z.jsx)("p",{className:"text text_type_main-default",children:t.name}),"done"===t.status&&Object(Z.jsx)("p",{className:"text text_type_main-small ".concat(qn.a.done),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"})]}),Object(Z.jsxs)("div",{className:qn.a.itemsRow,children:[Object(Z.jsx)("p",{className:"text text_type_main-default",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(Z.jsx)("div",{className:qn.a.items,children:r.map((function(e){return Object(Z.jsxs)("div",{className:qn.a.ingredient,children:[Object(Z.jsx)(un,{image:e.item.image}),Object(Z.jsx)("p",{className:"text text_type_main-default",children:e.item.name}),Object(Z.jsxs)("div",{className:qn.a.itemPrice,children:[Object(Z.jsxs)("p",{className:"text text_type_digits-default",children:[e.count,"x",e.item.price,"\xa0"]}),Object(Z.jsx)(ie.CurrencyIcon,{type:"primary"})]})]},e.item._id)}))})]}),Object(Z.jsxs)("div",{className:qn.a.lastRow,children:[Object(Z.jsx)("p",{className:"text text_type_main-small ".concat(qn.a.time),children:c.toLocaleString()}),Object(Z.jsxs)("div",{className:qn.a.itemPrice,children:[Object(Z.jsxs)("p",{className:"text text_type_digits-default",children:[a,"\xa0"]}),Object(Z.jsx)(ie.CurrencyIcon,{type:"primary"})]})]})]})},An=function(e){var t=e.orders,n=void 0!==t&&t,a=ar((function(e){return e.feed})),c=rr();return Object(r.useEffect)((function(){return a.wsConnected&&a.data.success||c(n?nn(p,!0):nn(f)),function(){c({type:en})}}),[]),Object(Z.jsx)("div",{className:Bn.a.main,children:Object(Z.jsx)("div",{className:"form-area ".concat(Bn.a.box),children:Object(Z.jsx)(Gn,{})})})},Un=function(){var e,t,n=Object(u.h)(),a=Object(r.useState)(!0),c=Object(j.a)(a,2),s=c[0],i=c[1],o=Object(r.useCallback)((function(){i(!1)}),[i]);return s?Object(Z.jsx)("div",{children:Object(Z.jsx)(it,{headerText:" ",isShowing:s,toggle:o,children:Object(Z.jsx)(Gn,{})})}):Object(Z.jsx)(u.a,{to:null===(e=n.state)||void 0===e||null===(t=e.background)||void 0===t?void 0:t.pathname})},Mn=function(){var e,t=Object(u.h)(),n=Object(r.useState)(!0),a=Object(j.a)(n,2),c=a[0],s=a[1],i=Object(r.useCallback)((function(){s(!1)}),[s]);return c?Object(Z.jsx)("div",{children:Object(Z.jsx)(it,{headerText:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",isShowing:c,toggle:i,children:Object(Z.jsx)(Nn,{})})}):Object(Z.jsx)(u.a,{to:(null===t||void 0===t||null===(e=t.state)||void 0===e?void 0:e.from)||"/"})},Fn=n(90),Hn=n.n(Fn),Qn=function(){var e=ar((function(e){return e.authInfo.request||e.ingredients.request||e.orderDetails.request||e.resetPassword.request||e.feed.request}));return e?s.a.createPortal(Object(Z.jsx)(a.a.Fragment,{children:Object(Z.jsx)("div",{className:Hn.a.main,style:{display:e?"flex":"none"},children:Object(Z.jsxs)("div",{className:Hn.a["lds-roller"],children:[Object(Z.jsx)("div",{}),Object(Z.jsx)("div",{}),Object(Z.jsx)("div",{}),Object(Z.jsx)("div",{}),Object(Z.jsx)("div",{}),Object(Z.jsx)("div",{}),Object(Z.jsx)("div",{}),Object(Z.jsx)("div",{})]})})}),document.getElementById("react-modals")):null},Vn=function(){var e=ar((function(e){return e.ingredients.items})),t=rr(),n=Object(u.h)(),a=n.state&&n.state.background;return Object(r.useEffect)((function(){e&&0!==e.length||t((function(e){e({type:_e}),B().then((function(t){var n=Object(j.a)(t,2),r=n[0],a=n[1];e({type:xe,ingredients:r,categories:a})})).catch((function(){e({type:he})}))}))}),[e,t]),Object(Z.jsxs)("div",{className:"main-grid",children:[Object(Z.jsx)(de,{}),Object(Z.jsxs)(u.d,{location:a||n,children:[Object(Z.jsx)(ne,{path:"/login",exact:!0,children:Object(Z.jsx)(kt,{})}),Object(Z.jsx)(ne,{path:"/register",exact:!0,children:Object(Z.jsx)(Rt,{})}),Object(Z.jsx)(ne,{path:"/forgot-password",exact:!0,children:Object(Z.jsx)(qt,{})}),Object(Z.jsx)(ne,{path:"/reset-password",exact:!0,children:Object(Z.jsx)(Gt,{})}),Object(Z.jsx)(u.b,{path:"/",exact:!0,children:Object(Z.jsx)(ht,{})}),Object(Z.jsx)(u.b,{path:"/feed",exact:!0,children:Object(Z.jsx)(Dn,{})}),Object(Z.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(Z.jsx)(An,{})}),Object(Z.jsx)(ee,{path:"/profile/orders/:id",exact:!0,children:Object(Z.jsx)(An,{orders:!0})}),Object(Z.jsx)(ee,{path:"/profile",children:Object(Z.jsx)(_n,{})}),Object(Z.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(Z.jsx)(wn,{})}),Object(Z.jsx)(u.b,{children:Object(Z.jsx)(Cn,{})})]}),a&&Object(Z.jsx)(u.b,{path:"/ingredients/:id",children:Object(Z.jsx)(Mn,{})}),a&&Object(Z.jsx)(u.b,{path:"/feed/:id",children:Object(Z.jsx)(Un,{})}),a&&Object(Z.jsx)(u.b,{path:"/profile/orders/:id",children:Object(Z.jsx)(Un,{})}),Object(Z.jsx)(Qn,{})]})},zn={items:[],cats:[],activeTab:"bun",request:!1,failed:!1},Jn={bun:"",items:[],price:0,counter:{}},Kn={number:"",name:"",request:!1,failed:!1,show:!1},Xn={message:"",step:"",request:!1,failed:!1},Yn={request:!1,success:!1,user:{email:"",name:""}},Zn={wsConnected:!1,request:!1,data:{success:!1,orders:[],total:0,totalToday:0}},$n=Object(i.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:return Object(l.a)(Object(l.a)({},e),{},{request:!0,failed:!1});case xe:return Object(l.a)(Object(l.a)({},e),{},{items:t.ingredients,cats:t.categories,request:!1,failed:!1});case he:return Object(l.a)(Object(l.a)({},e),{},{request:!1,failed:!0});case ve:return Object(l.a)(Object(l.a)({},e),{},{activeTab:t.active});default:return e}},constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qe:return Object(l.a)(Object(l.a)({},e),{},{bun:t.bun,items:t.items,counter:g(t.bun,t.items)});case ze:return Object(l.a)(Object(l.a)({},e),{},{items:t.items});case Je:return Jn;case Ve:return Object(l.a)(Object(l.a)({},e),{},{price:t.price});default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dt:return Object(l.a)(Object(l.a)({},e),{},{request:!0,failed:!1});case jt:return Object(l.a)(Object(l.a)({},e),{},{request:!1,failed:!1,number:t.number,name:t.name,show:!0});case mt:return Object(l.a)(Object(l.a)({},e),{},{request:!1,failed:!0});case bt:return Object(l.a)(Object(l.a)({},e),{},{show:!1});default:return e}},resetPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wt:return Object(l.a)(Object(l.a)({},e),{},{request:!0,failed:!1});case Bt:return Object(l.a)(Object(l.a)({},e),{},{request:!1,failed:!1,message:t.message,step:t.stepOnSuccess});case Lt:return Object(l.a)(Object(l.a)({},e),{},{request:!1,failed:!0,message:t.error,step:t.stepOnFailed});default:return e}},authInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(l.a)(Object(l.a)({},e),{},{request:!0});case z:return Object(l.a)(Object(l.a)({},e),{},{request:!1,success:t.authInfo.success,user:t.authInfo.user});case J:return Object(l.a)(Object(l.a)({},e),{},{request:!1});case K:return Object(l.a)(Object(l.a)({},e),{},{request:!0});case X:return Yn;case Y:return Object(l.a)(Object(l.a)({},e),{},{request:!1});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Yt:return Object(l.a)(Object(l.a)({},e),{},{request:!0});case Zt:return Object(l.a)(Object(l.a)({},e),{},{error:void 0,request:!1,wsConnected:!0});case $t:return Object(l.a)(Object(l.a)({},e),{},{request:!1,error:t.payload,wsConnected:!1});case en:return Object(l.a)(Object(l.a)({},e),{},{error:void 0,wsConnected:!1});case tn:var n,r,a=JSON.parse(t.payload);return Object(l.a)(Object(l.a)({},e),{},{error:void 0,data:Object(l.a)(Object(l.a)({},a),{},{orders:null!==(n=null===(r=a.orders)||void 0===r?void 0:r.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{number:v(e.number)})})))&&void 0!==n?n:[]})});default:return e}}}),er=n(132),tr=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c)(Object(i.a)(er.a,function(e){return function(t){var n=null;return function(r){return function(a){var c=t.dispatch,s=a.type,i=a.payload;if(s===e.wsStart&&(n=new WebSocket(i)),n&&(n.onopen=function(t){c(e.onOpen(t))},n.onerror=function(t){c(e.onError(t))},n.onmessage=function(t){c(e.onMessage(t))},n.onclose=function(t){c(e.onClose(t))},s===e.wsSend)){var o=i;n.send(JSON.stringify(o))}r(a)}}}}(rn))),nr=Object(i.d)($n,tr),rr=function(){return Object(o.b)()},ar=o.c;s.a.render(Object(Z.jsx)(a.a.StrictMode,{children:Object(Z.jsx)(o.a,{store:nr,children:Object(Z.jsx)(oe.a,{basename:"/react-burger",children:Object(Z.jsx)(Vn,{})})})}),document.getElementById("root"))},25:function(e,t,n){e.exports={main:"order-details_main__3F3Md",row:"order-details_row__S-1G2",firstRow:"order-details_firstRow__9fJtR order-details_row__S-1G2",nameRow:"order-details_nameRow__3k9Di order-details_row__S-1G2",done:"order-details_done__1cj5U",itemsRow:"order-details_itemsRow__WhUUy order-details_row__S-1G2",items:"order-details_items__2LTYW index_scrollable__2QHK6",ingredient:"order-details_ingredient__2cMdF",lastRow:"order-details_lastRow__ixsSO order-details_row__S-1G2",itemPrice:"order-details_itemPrice__kppIk",time:"order-details_time__2vu8G"}},34:function(e,t,n){e.exports={main:"feed-order_main__8YS72",content:"feed-order_content__kpasH",ingredients:"feed-order_ingredients__3fUIo",price:"feed-order_price__1Agj3",icon:"feed-order_icon__3FsA5"}},38:function(e,t,n){e.exports={main:"burger-constructor-list_main__3CQk_",onHover:"burger-constructor-list_onHover__1LDiU",topBun:"burger-constructor-list_topBun__QcqmC",bottomBun:"burger-constructor-list_bottomBun__QgzVF",ingredients:"burger-constructor-list_ingredients__3pEGb"}},44:function(e,t,n){e.exports={nav:"app-header_nav__2yQ5d",leftItems:"app-header_leftItems__31DWK",rightItems:"app-header_rightItems__2JB2i app-header_leftItems__31DWK",homeLink:"app-header_homeLink__3UU1h"}},45:function(e,t,n){e.exports={main:"app-header-button_main__2MbPt",iconWrapper:"app-header-button_iconWrapper__1I9v0",textWrapper:"app-header-button_textWrapper__rGRtb",active:"app-header-button_active__1VjSc"}},46:function(e,t,n){e.exports={main:"burger-ingredients-card_main__3EcQj",priceWrapper:"burger-ingredients-card_priceWrapper__lt1s6",textWrapper:"burger-ingredients-card_textWrapper__1h7GQ",logoWrapper:"burger-ingredients-card_logoWrapper__2RA7v"}},47:function(e,t,n){e.exports={main:"modal_main__dlGeq",modalHeader:"modal_modalHeader__3PnG4",closeButton:"modal_closeButton__2TH7A",modalContent:"modal_modalContent__dyzna"}},54:function(e,t,n){e.exports={main:"password-recover_main__1IeRc index_content-grid__BhKkB"}},56:function(e,t,n){e.exports={main:"burger-constructor-item_main__3d7LX",ingredientWrapper:"burger-constructor-item_ingredientWrapper__1I7rf",dragIconWrapper:"burger-constructor-item_dragIconWrapper__1OZ7r"}},57:function(e,t,n){e.exports={main:"burger-constructor-submit_main__11ikr",iconWrapper:"burger-constructor-submit_iconWrapper__1qY5V",buttonWrapper:"burger-constructor-submit_buttonWrapper__1wbQn"}},58:function(e,t,n){e.exports={main:"burger-constructor-modal-order_main__jMmCb",confirmButton:"burger-constructor-modal-order_confirmButton__2t-V2",comment:"burger-constructor-modal-order_comment__22thk"}},59:function(e,t,n){e.exports={main:"common-form_main__3ZqZ6",header:"common-form_header__3PQvU",buttonWrapper:"common-form_buttonWrapper__Gqhnv"}},60:function(e,t,n){e.exports={main:"ingredient_main__3G23r index_content-grid__BhKkB",box:"ingredient_box__f9aH_",header:"ingredient_header__3ViWj"}},61:function(e,t,n){e.exports={main:"burger-ingredients-modal-details_main__1gUkn",details:"burger-ingredients-modal-details_details__2FUCD",info:"burger-ingredients-modal-details_info__38Gpt"}},84:function(e,t,n){e.exports={main:"burger-ingredients-category_main__w4X02",textWrapper:"burger-ingredients-category_textWrapper___0lC6"}},87:function(e,t,n){e.exports={ingredientBg:"ingredient-icon_ingredientBg__31vUJ",ingredient:"ingredient-icon_ingredient__moT4a"}},88:function(e,t,n){e.exports={main:"feed-list_main__34FgW",link:"feed-list_link__F570o"}},89:function(e,t,n){e.exports={main:"feed-item_main__2TiuA index_content-grid__BhKkB",box:"feed-item_box__2nw8H",header:"feed-item_header__gqDcu"}},90:function(e,t,n){e.exports={main:"modal-request_main__3j-Hv","lds-roller":"modal-request_lds-roller__4AtI6"}}},[[231,1,2]]]);
//# sourceMappingURL=main.b8b03600.chunk.js.map